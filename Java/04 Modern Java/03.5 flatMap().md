In a nutshell, the flatMap method lets you replace each value of a stream with another stream and then concatenates all the generated streams into a single stream.

# Unique Characters from a List of Words

```java
List<String> uniqueCharacters =
  words.stream()
       .map(word -> word.split(""))
       .flatMap(Arrays::stream)
       .distinct()
       .collect(toList());
```

![[Pasted image 20250904211300.png]]# Pairs

Given two lists of numbers, how would you return all pairs of numbers?

For example, given a list `[1, 2, 3]` and a list `[3, 4]` you should return` [(1, 3), (1, 4), (2, 3), (2, 4), (3, 3), (3, 4)]`. For simplicity, you can represent a pair as an array with two elements. Answer: You could use two maps to iterate on the two lists and generate the pairs. But this would return a Stream<Stream<Integer[]>>. What you need to do is flatten the generated stream to result in a Stream<Integer[]>. That is what `flatMap` is for `List<Integer> numbers1 = Arrays.asList(1,2,3);`

```java
List<Integer> numbers2 = Arrays.asList(3, 4);

List<int[]> pairs = numbers1.stream()
                            .flatMap(i -> numbers2.stream()
                                                  .map(j -> new int[]{i, j}))
                            .collect(toList());
```